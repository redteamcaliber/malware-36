package preprocess;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;

import weka.classifiers.meta.FilteredClassifier;
import weka.classifiers.trees.J48;
import weka.core.Instances;
import weka.filters.unsupervised.attribute.Remove;

public class J48Test {

	public static void main(String[] args) {
		try {
			BufferedReader reader;

			reader = new BufferedReader(new FileReader("/home/batu/train-newnew4.arff"));

			Instances train = new Instances(reader);
			reader.close();
			// setting class attribute
			train.setClassIndex(train.numAttributes() - 1);

			// filter
			Remove rm = new Remove();
			rm.setAttributeIndices("1"); // remove 1st attribute

			// classifier
			J48 j48 = new J48();
			j48.setUnpruned(true);
			FilteredClassifier fc = new FilteredClassifier();
			fc.setFilter(rm);
			fc.setClassifier(j48);

			fc.buildClassifier(train);

			// BufferedWriter w = new BufferedWriter(new
			// FileWriter("/home/batu/submit.csv"));
			// w.write("\"Id\",\"Prediction1\",\"Prediction2\",\"Prediction3\",\"Prediction4\",\"Prediction5\",\"Prediction6\",\"Prediction7\",\"Prediction8\",\"Prediction9\"\n");
			// index = 0;
			// while ((current = loader1.getNextInstance(structure1)) != null) {
			// System.out.println(index++);
			// w.write(current.stringValue(0));
			// double[] pred = fc.distributionForInstance(current);
			// for (int j = 0; j < pred.length; j++) {
			// w.write("," + new
			// DecimalFormat("#0.0000000000000000").format(pred[j]));
			// }
			// w.write("\n");
			// }
			// w.close();

		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

	}

}
